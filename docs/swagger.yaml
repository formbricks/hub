definitions:
  BulkDeleteResponse:
    properties:
      deleted_count:
        type: integer
      message:
        type: string
    type: object
  CreateFeedbackRecordRequest:
    properties:
      collected_at:
        type: string
      field_id:
        type: string
      field_label:
        type: string
      field_type:
        type: string
      language:
        type: string
      metadata:
        type: object
      response_id:
        type: string
      source_id:
        type: string
      source_name:
        type: string
      source_type:
        type: string
      tenant_id:
        type: string
      user_identifier:
        type: string
      value_boolean:
        type: boolean
      value_date:
        type: string
      value_json:
        type: object
      value_number:
        type: number
      value_text:
        type: string
    type: object
  ErrorDetail:
    properties:
      location:
        type: string
      message:
        type: string
      value: {}
    type: object
  FeedbackRecord:
    properties:
      collected_at:
        type: string
      created_at:
        type: string
      field_id:
        type: string
      field_label:
        type: string
      field_type:
        type: string
      id:
        type: string
      language:
        type: string
      metadata:
        type: object
      response_id:
        type: string
      source_id:
        type: string
      source_name:
        type: string
      source_type:
        type: string
      tenant_id:
        type: string
      updated_at:
        type: string
      user_identifier:
        type: string
      value_boolean:
        type: boolean
      value_date:
        type: string
      value_json:
        type: object
      value_number:
        type: number
      value_text:
        type: string
    type: object
  ListFeedbackRecordsResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/FeedbackRecord'
        type: array
      limit:
        type: integer
      offset:
        type: integer
      total:
        type: integer
    type: object
  ProblemDetails:
    properties:
      detail:
        type: string
      errors:
        items:
          $ref: '#/definitions/ErrorDetail'
        type: array
      instance:
        type: string
      status:
        type: integer
      title:
        type: string
      type:
        type: string
    type: object
  SearchFeedbackRecordsResponse:
    properties:
      count:
        type: integer
      query:
        type: string
      results:
        items:
          $ref: '#/definitions/SearchResultItem'
        type: array
    type: object
  SearchResultItem:
    properties:
      collected_at:
        type: string
      created_at:
        type: string
      field_id:
        type: string
      field_label:
        type: string
      field_type:
        type: string
      id:
        type: string
      language:
        type: string
      metadata:
        type: object
      response_id:
        type: string
      similarity_score:
        type: number
      source_id:
        type: string
      source_name:
        type: string
      source_type:
        type: string
      tenant_id:
        type: string
      updated_at:
        type: string
      user_identifier:
        type: string
      value_boolean:
        type: boolean
      value_date:
        type: string
      value_json:
        type: object
      value_number:
        type: number
      value_text:
        type: string
    type: object
  UpdateFeedbackRecordRequest:
    properties:
      language:
        type: string
      metadata:
        type: object
      user_identifier:
        type: string
      value_boolean:
        type: boolean
      value_date:
        type: string
      value_json:
        type: object
      value_number:
        type: number
      value_text:
        type: string
    type: object
info:
  contact:
    email: tiago@formbricks.com
    name: Tiago Farto
  description: API for managing feedback records collection
  title: Formbricks Hub API
  version: "1.0"
paths:
  /health:
    get:
      description: Check if the API is running
      produces:
      - text/plain
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Health check
      tags:
      - health
  /v1/feedback-records:
    delete:
      description: Permanently deletes all feedback record data points matching the
        specified user_identifier. This endpoint supports GDPR Article 17 (Right to
        Erasure) requests.
      parameters:
      - description: Delete all records matching this user identifier
        in: query
        name: user_identifier
        required: true
        type: string
      - description: Filter by tenant ID (optional, for multi-tenant deployments)
        in: query
        name: tenant_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/BulkDeleteResponse'
        "400":
          description: user_identifier is required
          schema:
            $ref: '#/definitions/ProblemDetails'
        "401":
          description: Unauthorized - Invalid or missing API key
          schema:
            $ref: '#/definitions/ProblemDetails'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ProblemDetails'
      security:
      - BearerAuth: []
      summary: Bulk delete feedback records by user identifier
      tags:
      - Feedback Records
    get:
      description: Lists feedback records with optional filters and pagination
      parameters:
      - description: Filter by tenant ID
        in: query
        name: tenant_id
        type: string
      - description: Filter by response ID
        in: query
        name: response_id
        type: string
      - description: Filter by source type
        in: query
        name: source_type
        type: string
      - description: Filter by source ID
        in: query
        name: source_id
        type: string
      - description: Filter by field type
        in: query
        name: field_type
        type: string
      - description: Filter by user identifier
        in: query
        name: user_identifier
        type: string
      - description: Filter by collected_at >= since (ISO 8601 format)
        in: query
        name: since
        type: string
      - description: Filter by collected_at <= until (ISO 8601 format)
        in: query
        name: until
        type: string
      - description: Number of results to return (max 1000)
        in: query
        name: limit
        type: integer
      - description: Number of results to skip
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ListFeedbackRecordsResponse'
        "401":
          description: Unauthorized - Invalid or missing API key
          schema:
            $ref: '#/definitions/ProblemDetails'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ProblemDetails'
      security:
      - BearerAuth: []
      summary: List feedback records with filters
      tags:
      - Feedback Records
    post:
      consumes:
      - application/json
      description: Create a new feedback record data point
      parameters:
      - description: Feedback record data to create
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/CreateFeedbackRecordRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/FeedbackRecord'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ProblemDetails'
        "401":
          description: Unauthorized - Invalid or missing API key
          schema:
            $ref: '#/definitions/ProblemDetails'
      security:
      - BearerAuth: []
      summary: Create feedback record
      tags:
      - Feedback Records
  /v1/feedback-records/{id}:
    delete:
      description: Permanently deletes a feedback record data point
      parameters:
      - description: Feedback Record ID (UUID)
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid UUID format
          schema:
            $ref: '#/definitions/ProblemDetails'
        "401":
          description: Unauthorized - Invalid or missing API key
          schema:
            $ref: '#/definitions/ProblemDetails'
        "404":
          description: Feedback record not found
          schema:
            $ref: '#/definitions/ProblemDetails'
      security:
      - BearerAuth: []
      summary: Delete a feedback record
      tags:
      - Feedback Records
    get:
      description: Retrieves a single feedback record data point by its UUID
      parameters:
      - description: Feedback Record ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/FeedbackRecord'
        "400":
          description: Invalid UUID format
          schema:
            $ref: '#/definitions/ProblemDetails'
        "401":
          description: Unauthorized - Invalid or missing API key
          schema:
            $ref: '#/definitions/ProblemDetails'
        "404":
          description: Feedback record not found
          schema:
            $ref: '#/definitions/ProblemDetails'
      security:
      - BearerAuth: []
      summary: Get a feedback record by ID
      tags:
      - Feedback Records
    patch:
      consumes:
      - application/json
      description: Updates specific fields of a feedback record data point
      parameters:
      - description: Feedback Record ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/UpdateFeedbackRecordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/FeedbackRecord'
        "400":
          description: Invalid request or UUID format
          schema:
            $ref: '#/definitions/ProblemDetails'
        "401":
          description: Unauthorized - Invalid or missing API key
          schema:
            $ref: '#/definitions/ProblemDetails'
        "404":
          description: Feedback record not found
          schema:
            $ref: '#/definitions/ProblemDetails'
      security:
      - BearerAuth: []
      summary: Update a feedback record
      tags:
      - Feedback Records
  /v1/feedback-records/search:
    get:
      description: Performs vector similarity search on feedback record data using
        OpenAI embeddings. Only returns text records that have been embedded.
      parameters:
      - description: Natural language search query
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results to return (default 10, max 100)
        in: query
        name: limit
        type: integer
      - description: Filter by source type
        in: query
        name: source_type
        type: string
      - description: Filter by collection date (ISO 8601)
        in: query
        name: since
        type: string
      - description: Filter by collection date (ISO 8601)
        in: query
        name: until
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/SearchFeedbackRecordsResponse'
        "400":
          description: Invalid request parameters or missing query
          schema:
            $ref: '#/definitions/ProblemDetails'
        "401":
          description: Unauthorized - Invalid or missing API key
          schema:
            $ref: '#/definitions/ProblemDetails'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/ProblemDetails'
      security:
      - BearerAuth: []
      summary: Search feedback records using semantic search
      tags:
      - Feedback Records
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and your API key.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
