---
title: "Environment Variables"
description: "Complete reference for configuring Formbricks Hub via environment variables."
---

## Required Variables

### `API_KEY`

API key for authentication. All API requests (except `/health` and `/docs`) require the `Authorization: Bearer <token>` header.

**Example:**

```bash
API_KEY=your-secret-api-key-here
```

**Default:** None (required)

**Usage:**

```bash
curl -H "Authorization: Bearer your-secret-key-here" \
  http://localhost:8080/v1/feedback-records
```

[Learn more about authentication →](/core-concepts/authentication)

---

## Database Configuration

### `DATABASE_URL`

PostgreSQL connection string.

**Format:**

```
postgres://[user]:[password]@[host]:[port]/[database]?[params]
```

**Examples:**

```bash
# Local development
DATABASE_URL=postgres://postgres:postgres@localhost:5432/hub_dev?sslmode=disable

# Production with SSL
DATABASE_URL=postgres://user:pass@db.example.com:5432/hub_prod?sslmode=require
```

**Default:** `postgres://postgres:postgres@localhost:5432/test_db?sslmode=disable`

---

## Server Configuration

### `PORT`

Port for the HTTP server.

**Examples:**

```bash
PORT=8080  # Default
PORT=3000  # Custom port
```

**Default:** `8080`

---

## Logging

### `LOG_LEVEL`

Logging verbosity level.

**Options:**

- `debug` - Detailed debugging information
- `info` - General informational messages (recommended)
- `warn` - Warning messages only
- `error` - Error messages only

**Examples:**

```bash
LOG_LEVEL=debug  # Development
LOG_LEVEL=info   # Production (recommended)
LOG_LEVEL=warn   # Quiet production
```

**Default:** `info`

---

## Observability

When these variables are empty or unset, the corresponding feature is disabled and a startup warning is logged (e.g. "metrics not enabled", "tracing not enabled"). See [Metrics and Observability](/reference/metrics) for full details.

### `OTEL_METRICS_EXPORTER`

Set to `otlp` to enable metrics via OTLP push to the same endpoint as traces (`OTEL_EXPORTER_OTLP_ENDPOINT`). Empty or unset = metrics disabled.

**Example:**

```bash
OTEL_METRICS_EXPORTER=otlp
```

**Default:** Empty (metrics disabled)

---

### `OTEL_TRACES_EXPORTER`

Set to `otlp` or `stdout` to enable distributed tracing. Empty or unset = tracing disabled. When enabled, trace context (`trace_id`, `span_id`) and `request_id` are added to structured log records when the slog handler receives a context with an active span or request ID.

**Options:**

- `otlp` — Export traces via OTLP (e.g. to a collector). Optionally set `OTEL_EXPORTER_OTLP_ENDPOINT`.
- `stdout` — Print traces to stdout (useful for local development).

**Example:**

```bash
OTEL_TRACES_EXPORTER=otlp
# OTEL_EXPORTER_OTLP_ENDPOINT=https://localhost:4318  # optional
```

**Default:** Empty (tracing disabled)

---

### `OTEL_EXPORTER_OTLP_ENDPOINT`

Optional. Base URL for the OTLP exporter when `OTEL_TRACES_EXPORTER=otlp` (e.g. `https://localhost:4318`). The path `/v1/traces` is appended by the client.

**Default:** Empty (exporter uses its default, e.g. localhost:4318)

---

## Complete Example: Development

```bash
# .env

# Authentication (required)
API_KEY=dev-secret-key

# Database
DATABASE_URL=postgres://postgres:postgres@localhost:5432/hub_dev?sslmode=disable

# Server
PORT=8080

# Logging
LOG_LEVEL=debug

# Optional: metrics and tracing
# OTEL_METRICS_EXPORTER=otlp
# OTEL_TRACES_EXPORTER=stdout
```

## Complete Example: Production

```bash
# Production environment variables

# Authentication (required)
API_KEY=your-cryptographically-secure-key-here

# Database
DATABASE_URL=postgres://prod_user:secure_password@db.production.com:5432/hub_prod?sslmode=require

# Server
PORT=8080

# Logging
LOG_LEVEL=info

# Optional: metrics and tracing (OTLP push to collector)
# OTEL_METRICS_EXPORTER=otlp
# OTEL_TRACES_EXPORTER=otlp
# OTEL_EXPORTER_OTLP_ENDPOINT=http://collector:4318
```

## Loading Environment Variables

### Using `.env` File

```bash
# Copy example
cp .env.example .env

# Edit with your values
vim .env

# Start the server (variables are automatically loaded)
make run
```

### Using Docker

```bash
docker run -d \
  -e API_KEY="your-key" \
  -e DATABASE_URL="postgres://..." \
  formbricks/hub:latest
```

### Using Docker Compose

```yaml
services:
  hub:
    image: formbricks/hub:latest
    environment:
      API_KEY: ${API_KEY}
      DATABASE_URL: ${DATABASE_URL}
      LOG_LEVEL: info
    env_file:
      - .env.production
```

## Troubleshooting

### "API_KEY environment variable is required" Error

**Problem:** Missing `API_KEY` environment variable.

**Solution:** Set the variable in your `.env` file:

```bash
API_KEY=your-secret-api-key-here
```

### "Cannot connect to database" Error

**Problem:** Database connection details are incorrect or database is not running.

**Solutions:**

1. Check PostgreSQL is running: `docker compose ps`
2. Verify connection string format
3. Test connection manually:
   ```bash
   psql "postgres://postgres:postgres@localhost:5432/hub_dev?sslmode=disable"
   ```

### API Key Not Working

**Problem:** Getting 401 errors despite setting `Authorization` header.

**Solutions:**

1. Verify `API_KEY` is set: `grep API_KEY .env`
2. Check header format is correct: `Authorization: Bearer <your-key>`
3. Ensure key matches exactly (no extra spaces)

## Next Steps

- [Authentication Guide](/core-concepts/authentication) - Secure your API
- [API Reference](/api-reference) - Explore endpoints
- [Architecture](/reference/architecture) - System design and components
