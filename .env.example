# Formbricks Hub Configuration
# Copy this file to .env and update the values as needed

# API Key for authentication (required)
# This key is used to authenticate requests to protected endpoints
# The server will fail to start if this is not set
API_KEY=your-secret-api-key-here

# Postgres host port for docker-compose (optional). Default: 5432. Override only if 5432 is in use (e.g. POSTGRES_PORT=5433); keep DATABASE_URL in sync.
# POSTGRES_PORT=5432

# Database connection URL (optional). Port must match POSTGRES_PORT when you override it.
# Default: postgres://postgres:postgres@localhost:5432/test_db?sslmode=disable
# Format: postgres://username:password@host:port/database?sslmode=disable
DATABASE_URL=postgres://postgres:postgres@localhost:5432/test_db?sslmode=disable

# HTTP server port (optional)
# Default: 8080
PORT=8080

# Logging level (optional)
# Default: info
# Valid values: debug, info, warn, error
LOG_LEVEL=info

# Max request body size in bytes (optional). Default: 10485760 (10 MiB). Requests exceeding this return 413.
# MAX_REQUEST_BODY_BYTES=10485760

# Message publisher: event channel buffer size (optional). Default: 1024
MESSAGE_PUBLISHER_QUEUE_MAX_SIZE=16384

# Message publisher: per-event processing timeout in seconds (optional). Default: 10
MESSAGE_PUBLISHER_PER_EVENT_TIMEOUT_SECONDS=10

# Graceful shutdown timeout in seconds (optional). Default: 30
SHUTDOWN_TIMEOUT_SECONDS=30

# Webhook max fan-out per event (optional)
# Max number of webhook jobs enqueued per event; excess is capped and logged. Default: 500
WEBHOOK_MAX_FAN_OUT_PER_EVENT=500

# Webhook max count (optional)
# Max total webhooks allowed; creation returns 403 Forbidden when limit reached. Default: 500
WEBHOOK_MAX_COUNT=500

# Embeddings are optional. No default for provider: if EMBEDDING_PROVIDER is unset, embeddings are disabled and no embedding jobs run.
# To enable, set EMBEDDING_PROVIDER (e.g. openai or google). Model and API key are optional (e.g. local provider may not need them).
# Vector size is fixed (768) in code.
# EMBEDDING_PROVIDER=openai
# EMBEDDING_PROVIDER_API_KEY=sk-...   (optional for some providers, e.g. local)
# EMBEDDING_MODEL=<model name>        (optional; provider may have its own default)

# Search rate limit: max requests per minute per API key for semantic search and similar-feedback endpoints. 0 = disabled. Default: 60.
# SEARCH_RATE_LIMIT_REQUESTS_PER_MINUTE=60

# River UI basic auth (optional, used when running River UI via docker compose)
# Defaults: admin / changeme if unset
RIVER_BASIC_AUTH_USER=admin
RIVER_BASIC_AUTH_PASS=changeme
