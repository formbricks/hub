"use strict";(globalThis.webpackChunk_formbricks_docs=globalThis.webpackChunk_formbricks_docs||[]).push([[426],{37678:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(39430);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}},68415:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"core-concepts/webhooks","title":"Webhooks","description":"Get notified instantly when new feedback arrives, gets updated, or is deleted. Hub sends HTTP POST requests to your endpoints, enabling real-time integrations and custom workflows.","source":"@site/docs/core-concepts/webhooks.md","sourceDirName":"core-concepts","slug":"/core-concepts/webhooks","permalink":"/core-concepts/webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/formbricks/hub/tree/main/apps/docs/docs/core-concepts/webhooks.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/core-concepts/authentication"},"next":{"title":"Connectors","permalink":"/core-concepts/connectors"}}');var r=s(25270),o=s(37678);const t={sidebar_position:3},c="Webhooks",d={},l=[{value:"What You Can Build",id:"what-you-can-build",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Event Types",id:"event-types",level:2},{value:"<code>experience.created</code>",id:"experiencecreated",level:3},{value:"<code>experience.enriched</code>",id:"experienceenriched",level:3},{value:"<code>experience.updated</code>",id:"experienceupdated",level:3},{value:"<code>experience.deleted</code>",id:"experiencedeleted",level:3},{value:"Event Payload",id:"event-payload",level:2},{value:"Webhook Delivery",id:"webhook-delivery",level:2},{value:"Request Format",id:"request-format",level:3},{value:"Retry Logic &amp; Reliability",id:"retry-logic--reliability",level:3},{value:"Expected Response",id:"expected-response",level:3},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,r.jsx)(n.p,{children:"Get notified instantly when new feedback arrives, gets updated, or is deleted. Hub sends HTTP POST requests to your endpoints, enabling real-time integrations and custom workflows."}),"\n",(0,r.jsx)(n.h2,{id:"what-you-can-build",children:"What You Can Build"}),"\n",(0,r.jsx)(n.p,{children:"Webhooks unlock powerful automation:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83d\udce2 Send Slack notifications for low NPS scores or negative sentiment"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udcca Trigger real-time dashboard updates"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd04 Sync data to your data warehouse or CRM"}),"\n",(0,r.jsx)(n.li,{children:"\ud83c\udfaf Route urgent feedback to support teams automatically"}),"\n",(0,r.jsx)(n.li,{children:"\ud83e\udd16 Chain AI enrichment results into your own workflows"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Configure webhook URLs via the ",(0,r.jsx)(n.code,{children:"SERVICE_WEBHOOK_URLS"})," environment variable:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Single webhook\nSERVICE_WEBHOOK_URLS=https://api.example.com/webhooks/hub\n\n# Multiple webhooks (comma-separated)\nSERVICE_WEBHOOK_URLS=https://api.example.com/webhooks,https://analytics.example.com/events\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Add to your ",(0,r.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"SERVICE_WEBHOOK_URLS=https://your-domain.com/webhooks/hub\n"})}),"\n",(0,r.jsx)(n.p,{children:"Then restart the service:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"make dev\n"})}),"\n",(0,r.jsx)(n.h2,{id:"event-types",children:"Event Types"}),"\n",(0,r.jsx)(n.p,{children:"Hub sends webhooks for four types of events:"}),"\n",(0,r.jsx)(n.h3,{id:"experiencecreated",children:(0,r.jsx)(n.code,{children:"experience.created"})}),"\n",(0,r.jsxs)(n.p,{children:["Triggered when new feedback is created via ",(0,r.jsx)(n.code,{children:"POST /v1/experiences"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common use cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83d\udce2 Send Slack notifications for low NPS scores"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udcca Update real-time dashboards"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd04 Start data processing pipelines"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," For text responses, this event fires immediately when data is saved, ",(0,r.jsx)(n.strong,{children:"before"})," AI enrichment. Use ",(0,r.jsx)(n.code,{children:"experience.enriched"})," to get the AI-enriched data."]}),"\n",(0,r.jsx)(n.h3,{id:"experienceenriched",children:(0,r.jsx)(n.code,{children:"experience.enriched"})}),"\n",(0,r.jsx)(n.p,{children:"Triggered when AI enrichment completes for text responses (sentiment, emotion, topics, embeddings)."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common use cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83e\udd16 React to sentiment analysis results (e.g., alert on negative sentiment)"}),"\n",(0,r.jsx)(n.li,{children:"\ud83c\udff7\ufe0f Trigger workflows based on extracted topics"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\ude0a Route feedback by emotion to appropriate teams"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd0d Update semantic search indexes"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," This event only fires if you've configured ",(0,r.jsx)(n.code,{children:"SERVICE_OPENAI_API_KEY"})," and the response has ",(0,r.jsx)(n.code,{children:'field_type: "text"'}),". The payload includes the complete enriched data with ",(0,r.jsx)(n.code,{children:"sentiment"}),", ",(0,r.jsx)(n.code,{children:"sentiment_score"}),", ",(0,r.jsx)(n.code,{children:"emotion"}),", and ",(0,r.jsx)(n.code,{children:"topics"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"experienceupdated",children:(0,r.jsx)(n.code,{children:"experience.updated"})}),"\n",(0,r.jsxs)(n.p,{children:["Triggered when feedback is manually updated via ",(0,r.jsx)(n.code,{children:"PATCH /v1/experiences/{id}"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common use cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83d\udcdd Audit trail logging"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd04 Sync manual changes to external systems"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udcca Update cached analytics"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"experiencedeleted",children:(0,r.jsx)(n.code,{children:"experience.deleted"})}),"\n",(0,r.jsxs)(n.p,{children:["Triggered when feedback is deleted via ",(0,r.jsx)(n.code,{children:"DELETE /v1/experiences/{id}"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Common use cases:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83e\uddf9 Maintain data consistency across systems"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udcc9 Update aggregated metrics"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udccb Compliance logging (GDPR deletion tracking)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"event-payload",children:"Event Payload"}),"\n",(0,r.jsx)(n.p,{children:"All webhooks follow a consistent format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "event": "experience.created",\n  "timestamp": "2025-10-15T12:34:56Z",\n  "data": {\n    "id": "01932c8a-8b9e-7000-8000-000000000001",\n    "collected_at": "2025-10-15T12:34:56Z",\n    "created_at": "2025-10-15T12:34:56Z",\n    "updated_at": "2025-10-15T12:34:56Z",\n    "source_type": "survey",\n    "source_id": "survey-123",\n    "field_id": "q1",\n    "field_type": "rating",\n    "value_number": 9,\n    "metadata": {\n      "country": "US"\n    },\n    "language": "en",\n    "user_identifier": "user-123"\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Fields:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event"})," (string): Event type - ",(0,r.jsx)(n.code,{children:"experience.created"}),", ",(0,r.jsx)(n.code,{children:"experience.enriched"}),", ",(0,r.jsx)(n.code,{children:"experience.updated"}),", or ",(0,r.jsx)(n.code,{children:"experience.deleted"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"timestamp"})," (ISO 8601): When the event occurred"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data"})," (object): Complete experience record. For ",(0,r.jsx)(n.code,{children:"experience.enriched"}),", includes ",(0,r.jsx)(n.code,{children:"sentiment"}),", ",(0,r.jsx)(n.code,{children:"sentiment_score"}),", ",(0,r.jsx)(n.code,{children:"emotion"}),", and ",(0,r.jsx)(n.code,{children:"topics"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"webhook-delivery",children:"Webhook Delivery"}),"\n",(0,r.jsx)(n.h3,{id:"request-format",children:"Request Format"}),"\n",(0,r.jsx)(n.p,{children:"Hub makes an HTTP POST request to each configured webhook URL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'POST /your-endpoint HTTP/1.1\nHost: api.example.com\nContent-Type: application/json\nUser-Agent: Formbricks-Hub/1.0\n\n{\n  "event": "experience.created",\n  "timestamp": "2025-10-15T12:34:56Z",\n  "data": { ... }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"retry-logic--reliability",children:"Retry Logic & Reliability"}),"\n",(0,r.jsxs)(n.p,{children:["Hub uses a ",(0,r.jsx)(n.strong,{children:"worker pool architecture"})," to ensure reliable webhook delivery:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Worker pool"}),": 10 concurrent workers process webhooks in parallel"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Attempts"}),": Up to 3 retries per webhook"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeout"}),": 5 seconds per request"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Backoff"}),": Exponential delays between retries (1s, 2s, 4s)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Success"}),": Any 2xx HTTP status code"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Queue"}),": Buffered queue with backpressure handling"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Async Delivery",type:"info",children:(0,r.jsxs)(n.p,{children:["Webhook delivery is ",(0,r.jsx)(n.strong,{children:"fully asynchronous"})," and never blocks API responses. If your webhook is slow or fails, it won't impact the user experience. Failed webhooks are logged for debugging."]})}),"\n",(0,r.jsx)(n.admonition,{title:"Worker Pool Benefits",type:"tip",children:(0,r.jsx)(n.p,{children:"The worker pool ensures Hub can handle high-volume webhook traffic without memory leaks, even if your endpoints are slow or temporarily unavailable."})}),"\n",(0,r.jsx)(n.h3,{id:"expected-response",children:"Expected Response"}),"\n",(0,r.jsx)(n.p,{children:"Your webhook endpoint should respond with a 2xx status code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-http",children:'HTTP/1.1 200 OK\nContent-Type: application/json\n\n{"received": true}\n'})}),"\n",(0,r.jsx)(n.admonition,{title:"Respond Quickly",type:"tip",children:(0,r.jsxs)(n.p,{children:["Your webhook must respond within ",(0,r.jsx)(n.strong,{children:"5 seconds"}),". For heavy processing, return 200 immediately and process the event asynchronously."]})}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./ai-enrichment",children:"AI Enrichment \u2192"})," - Understand when AI enrichment webhooks fire"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./data-model",children:"Data Model \u2192"})," - Complete experience data schema"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"./authentication",children:"Authentication \u2192"})," - Secure your webhooks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"../api-reference",children:"API Reference \u2192"})," - Explore all endpoints"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);