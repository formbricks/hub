"use strict";(globalThis.webpackChunk_formbricks_docs=globalThis.webpackChunk_formbricks_docs||[]).push([[908],{37678:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>c});var r=s(39430);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}},39962:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"core-concepts/semantic-search","title":"Semantic Search","description":"Find feedback using natural language queries. Search by meaning, not just keywords\u2014\\"checkout problems\\" will find \\"payment failed\\", \\"cart issues\\", and \\"can\'t complete order\\".","source":"@site/docs/core-concepts/semantic-search.md","sourceDirName":"core-concepts","slug":"/core-concepts/semantic-search","permalink":"/core-concepts/semantic-search","draft":false,"unlisted":false,"editUrl":"https://github.com/formbricks/hub/tree/main/apps/docs/docs/core-concepts/semantic-search.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"AI Enrichment","permalink":"/core-concepts/ai-enrichment"},"next":{"title":"API Reference","permalink":"/api-reference"}}');var i=s(25270),t=s(37678);const d={sidebar_position:5},c="Semantic Search",l={},a=[{value:"What You Can Do",id:"what-you-can-do",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Example",id:"example",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Enable Embeddings",id:"1-enable-embeddings",level:3},{value:"2. Search Your Feedback",id:"2-search-your-feedback",level:3},{value:"How Embeddings Are Generated",id:"how-embeddings-are-generated",level:2},{value:"Automatic Background Processing",id:"automatic-background-processing",level:3},{value:"Context-Aware Embeddings",id:"context-aware-embeddings",level:3},{value:"Storage with pgvector",id:"storage-with-pgvector",level:3},{value:"Search API Reference",id:"search-api-reference",level:2},{value:"Endpoint",id:"endpoint",level:3},{value:"Query Parameters",id:"query-parameters",level:3},{value:"Examples",id:"examples",level:3},{value:"Use Cases",id:"use-cases",level:2},{value:"Customer Support",id:"customer-support",level:3},{value:"Product Discovery",id:"product-discovery",level:3},{value:"Competitive Analysis",id:"competitive-analysis",level:3},{value:"Trend Analysis",id:"trend-analysis",level:3},{value:"Cost Analysis",id:"cost-analysis",level:2},{value:"Pricing (text-embedding-3-small)",id:"pricing-text-embedding-3-small",level:3},{value:"At Scale",id:"at-scale",level:3},{value:"Model Comparison",id:"model-comparison",level:3},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Monitoring",id:"monitoring",level:2},{value:"Check Embedding Coverage",id:"check-embedding-coverage",level:3},{value:"Monitor Embedding Jobs",id:"monitor-embedding-jobs",level:3},{value:"Verify Search Index",id:"verify-search-index",level:3},{value:"Performance",id:"performance",level:2},{value:"Query Speed",id:"query-speed",level:3},{value:"Accuracy vs Speed",id:"accuracy-vs-speed",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"No Search Results",id:"no-search-results",level:3},{value:"Slow Embedding Generation",id:"slow-embedding-generation",level:3},{value:"Poor Search Quality",id:"poor-search-quality",level:3},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"semantic-search",children:"Semantic Search"})}),"\n",(0,i.jsx)(n.p,{children:'Find feedback using natural language queries. Search by meaning, not just keywords\u2014"checkout problems" will find "payment failed", "cart issues", and "can\'t complete order".'}),"\n",(0,i.jsx)(n.h2,{id:"what-you-can-do",children:"What You Can Do"}),"\n",(0,i.jsx)(n.p,{children:"With semantic search, you can:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\ud83d\udd0d ",(0,i.jsx)(n.strong,{children:"Find similar feedback"}),' - "Show me all checkout issues" finds related problems even with different wording']}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcac ",(0,i.jsx)(n.strong,{children:"Query in plain English"})," - Ask questions like a human, get relevant answers"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83c\udfaf ",(0,i.jsx)(n.strong,{children:"Discover patterns"})," - Find themes across thousands of responses instantly"]}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udd04 ",(0,i.jsx)(n.strong,{children:"Support workflows"}),' - "Find feedback like this support ticket" for faster resolution']}),"\n",(0,i.jsxs)(n.li,{children:["\ud83d\udcca ",(0,i.jsx)(n.strong,{children:"Analyze themes"})," - Group similar feedback without manual tagging"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(n.p,{children:["Semantic search uses ",(0,i.jsx)(n.strong,{children:"vector embeddings"}),"\u2014numerical representations of text that capture meaning. Unlike keyword search, it understands:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Synonyms"}),': "expensive" matches "costly", "pricey", "too much money"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Intent"}),': "hard to use" matches "confusing interface", "complicated UX"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Context"}),': "checkout issues" matches "payment failed", "cart problems", "order won\'t submit"']}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Your query:"}),' "mobile app crashes"']}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Matches found:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'"The iOS app keeps freezing and shutting down" \u2705 (88% match)'}),"\n",(0,i.jsx)(n.li,{children:'"Android version crashes on startup" \u2705 (86% match)'}),"\n",(0,i.jsx)(n.li,{children:'"App is unstable, crashes frequently" \u2705 (84% match)'}),"\n",(0,i.jsx)(n.li,{children:'"Love the mobile experience!" \u274c (15% match - not relevant)'}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.h3,{id:"1-enable-embeddings",children:"1. Enable Embeddings"}),"\n",(0,i.jsx)(n.p,{children:"Add the embedding model to your environment:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Required - same OpenAI key as enrichment\nSERVICE_OPENAI_API_KEY=sk-your-api-key-here\n\n# Optional - embedding model (default: text-embedding-3-small)\nSERVICE_OPENAI_EMBEDDING_MODEL=text-embedding-3-small\n"})}),"\n",(0,i.jsx)(n.p,{children:"That's it! Embeddings are now generated automatically for all text responses."}),"\n",(0,i.jsx)(n.admonition,{title:"Default Is Great",type:"tip",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"text-embedding-3-small"})," provides excellent quality for customer feedback at the lowest cost. No need to change it unless you have very technical or complex content."]})}),"\n",(0,i.jsx)(n.h3,{id:"2-search-your-feedback",children:"2. Search Your Feedback"}),"\n",(0,i.jsx)(n.p,{children:"Use the semantic search API:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl "http://localhost:8080/v1/experiences/search?query=checkout+problems&limit=10" \\\n  -H "X-API-Key: your-api-key"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Response:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "id": "01abc...",\n      "value_text": "Payment failed during checkout. Very frustrating.",\n      "field_label": "What went wrong?",\n      "sentiment": "negative",\n      "emotion": "frustration",\n      "topics": ["checkout", "payment"],\n      "similarity_score": 0.89,\n      "collected_at": "2025-10-24T10:30:00Z"\n    },\n    {\n      "id": "02def...",\n      "value_text": "Can\'t complete my order, keeps timing out.",\n      "field_label": "Issues?",\n      "sentiment": "negative",\n      "topics": ["order", "performance"],\n      "similarity_score": 0.84,\n      "collected_at": "2025-10-24T09:15:00Z"\n    }\n  ],\n  "query": "checkout problems",\n  "count": 2\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"how-embeddings-are-generated",children:"How Embeddings Are Generated"}),"\n",(0,i.jsx)(n.h3,{id:"automatic-background-processing",children:"Automatic Background Processing"}),"\n",(0,i.jsx)(n.p,{children:"When you create a text response:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Experience saved"})," \u2192 API returns immediately"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Jobs queued"})," \u2192 Two background jobs created:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enrichment job (sentiment, emotion, topics)"}),"\n",(0,i.jsx)(n.li,{children:"Embedding job (vector generation)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Workers process"})," \u2192 Background workers pick up both jobs"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"OpenAI called"})," \u2192 Text + question sent to embedding model"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vector stored"})," \u2192 1536-dimensional vector saved to PostgreSQL"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ready to search"})," \u2192 Experience now searchable via semantic API"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Processing time:"})," Typically 5-15 seconds per response"]}),"\n",(0,i.jsx)(n.h3,{id:"context-aware-embeddings",children:"Context-Aware Embeddings"}),"\n",(0,i.jsx)(n.p,{children:"Embeddings include question context for better matching:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'"Question: What did you like most?\nResponse: The fast checkout process"\n'})}),"\n",(0,i.jsx)(n.p,{children:'This ensures "fast checkout" in response to "What did you like?" has different semantic meaning than "fast checkout" in response to "What needs improvement?"'}),"\n",(0,i.jsx)(n.h3,{id:"storage-with-pgvector",children:"Storage with pgvector"}),"\n",(0,i.jsxs)(n.p,{children:["Vectors are stored in PostgreSQL using the ",(0,i.jsx)(n.strong,{children:"pgvector"})," extension:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"1536 dimensions"})," for ",(0,i.jsx)(n.code,{children:"text-embedding-3-small"})," (default)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"3072 dimensions"})," for ",(0,i.jsx)(n.code,{children:"text-embedding-3-large"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HNSW index"})," for fast approximate nearest neighbor search"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cosine similarity"})," for matching (0.0 = no match, 1.0 = perfect match)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Vectors are ",(0,i.jsx)(n.strong,{children:"internal only"}),"\u2014never exposed in API responses to keep payloads lightweight."]}),"\n",(0,i.jsx)(n.h2,{id:"search-api-reference",children:"Search API Reference"}),"\n",(0,i.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"GET /v1/experiences/search\n"})}),"\n",(0,i.jsx)(n.h3,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"query"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u2705 Yes"}),(0,i.jsx)(n.td,{children:"Natural language search query"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"limit"})}),(0,i.jsx)(n.td,{children:"integer"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Max results to return (default: 20, max: 100)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"source_type"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:'Filter by source type (e.g., "survey", "review")'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"since"})}),(0,i.jsx)(n.td,{children:"ISO 8601"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Only results collected after this date"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"until"})}),(0,i.jsx)(n.td,{children:"ISO 8601"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Only results collected before this date"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Basic search:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/experiences/search?query=login+issues\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Limit results:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/experiences/search?query=dashboard+feedback&limit=5\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Filter by source:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/experiences/search?query=bug+reports&source_type=support\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Date range:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/experiences/search?query=pricing+concerns&since=2025-01-01&until=2025-03-31\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Combine filters:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"GET /v1/experiences/search?query=mobile+app+crashes&source_type=review&limit=50&since=2025-01-01\n"})}),"\n",(0,i.jsx)(n.h2,{id:"use-cases",children:"Use Cases"}),"\n",(0,i.jsx)(n.h3,{id:"customer-support",children:"Customer Support"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Find similar issues to current ticket:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Current ticket: "User can\'t log in with Google"\nGET /v1/experiences/search?query=google+login+not+working&source_type=support&limit=10\n'})}),"\n",(0,i.jsx)(n.p,{children:"Use results to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Find common solutions from past tickets"}),"\n",(0,i.jsx)(n.li,{children:"Identify if it's a widespread issue"}),"\n",(0,i.jsx)(n.li,{children:"Route to specialists who've handled similar cases"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"product-discovery",children:"Product Discovery"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Discover emerging themes:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# What are users saying about our mobile app?\nGET /v1/experiences/search?query=mobile+app+experience&limit=100\n"})}),"\n",(0,i.jsx)(n.p,{children:"Analyze results to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Identify pain points without manual categorization"}),"\n",(0,i.jsx)(n.li,{children:"Track sentiment trends on specific features"}),"\n",(0,i.jsx)(n.li,{children:"Prioritize roadmap items based on feedback volume"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"competitive-analysis",children:"Competitive Analysis"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Track competitor mentions:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# What are users comparing us to?\nGET /v1/experiences/search?query=competitor+comparison+features\n"})}),"\n",(0,i.jsx)(n.p,{children:"Extract insights about:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Features users wish you had"}),"\n",(0,i.jsx)(n.li,{children:"Why users chose you over competitors"}),"\n",(0,i.jsx)(n.li,{children:"Areas where competitors are ahead"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"trend-analysis",children:"Trend Analysis"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Monitor specific topics over time:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Q1 pricing feedback\nGET /v1/experiences/search?query=pricing+expensive+cost&since=2025-01-01&until=2025-03-31\n\n# Q2 pricing feedback\nGET /v1/experiences/search?query=pricing+expensive+cost&since=2025-04-01&until=2025-06-30\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Compare ",(0,i.jsx)(n.code,{children:"count"})," and ",(0,i.jsx)(n.code,{children:"similarity_score"})," distributions to track changes."]}),"\n",(0,i.jsx)(n.h2,{id:"cost-analysis",children:"Cost Analysis"}),"\n",(0,i.jsx)(n.h3,{id:"pricing-text-embedding-3-small",children:"Pricing (text-embedding-3-small)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cost per 1M tokens"}),": $0.020"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Average response"}),": ~50 words \u2248 65 tokens"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cost per 1,000 responses"}),": ~$0.0013 (less than 1 cent per 1,000!)"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cost per 100,000 responses"}),": ~$0.13"]}),"\n",(0,i.jsx)(n.h3,{id:"at-scale",children:"At Scale"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Monthly Feedback"}),(0,i.jsx)(n.th,{children:"Embedding Cost"}),(0,i.jsx)(n.th,{children:"Per Response"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"10,000"}),(0,i.jsx)(n.td,{children:"$0.013"}),(0,i.jsx)(n.td,{children:"$0.0000013"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"100,000"}),(0,i.jsx)(n.td,{children:"$0.13"}),(0,i.jsx)(n.td,{children:"$0.0000013"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"1,000,000"}),(0,i.jsx)(n.td,{children:"$1.30"}),(0,i.jsx)(n.td,{children:"$0.0000013"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Embeddings are ~10x cheaper than enrichment"})," because they don't require LLM reasoning, just vector generation."]}),"\n",(0,i.jsx)(n.h3,{id:"model-comparison",children:"Model Comparison"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Model"}),(0,i.jsx)(n.th,{children:"Cost (per 1M tokens)"}),(0,i.jsx)(n.th,{children:"Dimensions"}),(0,i.jsx)(n.th,{children:"Quality"}),(0,i.jsx)(n.th,{children:"Recommended For"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"text-embedding-3-small"})}),(0,i.jsx)(n.td,{children:"$0.020"}),(0,i.jsx)(n.td,{children:"1536"}),(0,i.jsx)(n.td,{children:"Excellent"}),(0,i.jsx)(n.td,{children:"General use (default)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"text-embedding-3-large"})}),(0,i.jsx)(n.td,{children:"$0.130"}),(0,i.jsx)(n.td,{children:"3072"}),(0,i.jsx)(n.td,{children:"Superior"}),(0,i.jsx)(n.td,{children:"Technical/complex content"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{title:"Cost Recommendation",type:"tip",children:(0,i.jsxs)(n.p,{children:["For typical customer feedback (short-form text, simple language), ",(0,i.jsx)(n.code,{children:"text-embedding-3-small"})," provides 95% of the quality at 15% of the cost. Only use ",(0,i.jsx)(n.code,{children:"text-embedding-3-large"})," if you need to analyze very technical or nuanced content."]})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,i.jsx)(n.p,{children:"Fine-tune embedding generation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Worker pool settings\nSERVICE_ENRICHMENT_WORKERS=3                    # Concurrent workers (default: 3)\nSERVICE_ENRICHMENT_POLL_INTERVAL=1              # Poll interval in seconds (default: 1)\n\n# Embedding model\nSERVICE_OPENAI_EMBEDDING_MODEL=text-embedding-3-small  # Default\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Embedding jobs share the same worker pool as enrichment jobs. If you have high volume, increase worker count."]}),"\n",(0,i.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,i.jsx)(n.h3,{id:"check-embedding-coverage",children:"Check Embedding Coverage"}),"\n",(0,i.jsx)(n.p,{children:"See how many responses have been embedded:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Embedding progress\nSELECT \n  COUNT(*) FILTER (WHERE embedding IS NOT NULL) as embedded,\n  COUNT(*) FILTER (WHERE embedding IS NULL) as not_embedded,\n  COUNT(*) as total,\n  ROUND(100.0 * COUNT(*) FILTER (WHERE embedding IS NOT NULL) / COUNT(*), 1) as percentage\nFROM experience_data\nWHERE field_type = 'text' AND value_text IS NOT NULL;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"monitor-embedding-jobs",children:"Monitor Embedding Jobs"}),"\n",(0,i.jsx)(n.p,{children:"Check job queue status:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Embedding job status\nSELECT \n  status,\n  COUNT(*) as count\nFROM enrichment_jobs\nWHERE job_type = 'embedding'\nGROUP BY status;\n\n-- Recent embedding activity\nSELECT \n  id,\n  status,\n  created_at,\n  processed_at,\n  EXTRACT(EPOCH FROM (processed_at - created_at)) as processing_seconds\nFROM enrichment_jobs\nWHERE job_type = 'embedding'\nORDER BY created_at DESC\nLIMIT 20;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"verify-search-index",children:"Verify Search Index"}),"\n",(0,i.jsx)(n.p,{children:"Check HNSW index status:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"-- Index information\nSELECT \n  indexname,\n  indexdef\nFROM pg_indexes\nWHERE tablename = 'experience_data'\n  AND indexname LIKE '%embedding%';\n"})}),"\n",(0,i.jsx)(n.h2,{id:"performance",children:"Performance"}),"\n",(0,i.jsx)(n.h3,{id:"query-speed",children:"Query Speed"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Indexed search"}),": ~50-200ms for millions of records (using HNSW index)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cold start"}),": First query may take ~500ms while warming cache"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Concurrent"}),": Handles hundreds of concurrent search queries"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"accuracy-vs-speed",children:"Accuracy vs Speed"}),"\n",(0,i.jsxs)(n.p,{children:["The HNSW (Hierarchical Navigable Small Worlds) index provides ",(0,i.jsx)(n.strong,{children:"approximate nearest neighbor"})," search:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Accuracy"}),": ~95-99% (finds most similar results, may miss edge cases)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Speed"}),": 100-1000x faster than exact search"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Trade-off"}),": Worth it for real-time search at scale"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For exact results (research/analysis), query PostgreSQL directly with cosine similarity\u2014but expect slower queries on large datasets."}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"no-search-results",children:"No Search Results"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," API returns empty results"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common causes:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Embeddings not yet generated (wait 10-15 seconds after creating experiences)"}),"\n",(0,i.jsx)(n.li,{children:"Query too specific or using exact keywords (try broader, more natural queries)"}),"\n",(0,i.jsx)(n.li,{children:"No text responses in database"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check embedding status:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT COUNT(*) FROM experience_data WHERE embedding IS NOT NULL;\n"})}),"\n",(0,i.jsx)(n.h3,{id:"slow-embedding-generation",children:"Slow Embedding Generation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," Embeddings taking 30+ seconds to generate"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Check OpenAI API status: ",(0,i.jsx)(n.a,{href:"https://status.openai.com",children:"status.openai.com"})]}),"\n",(0,i.jsxs)(n.li,{children:["Increase workers: ",(0,i.jsx)(n.code,{children:"SERVICE_ENRICHMENT_WORKERS=5"})]}),"\n",(0,i.jsx)(n.li,{children:"Check rate limits on OpenAI account"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"poor-search-quality",children:"Poor Search Quality"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Symptom:"})," Irrelevant results returned"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Common causes:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'Query too vague (e.g., "feedback" matches everything)'}),"\n",(0,i.jsx)(n.li,{children:"Mixed languages (embeddings work best within same language)"}),"\n",(0,i.jsx)(n.li,{children:"Very short queries (try 3-5 words minimum)"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Tips for better queries:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'\u2705 "mobile app crashes on startup" (specific, descriptive)'}),"\n",(0,i.jsx)(n.li,{children:'\u274c "app" (too vague)'}),"\n",(0,i.jsx)(n.li,{children:'\u2705 "slow checkout process payment timeout" (multiple related terms)'}),"\n",(0,i.jsx)(n.li,{children:'\u274c "bad" (too general)'}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./ai-enrichment",children:"AI Enrichment \u2192"})," - Understand how sentiment/topics are extracted"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./data-model",children:"Data Model \u2192"})," - Explore the experience data schema"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./webhooks",children:"Webhooks \u2192"})," - React to new feedback in real-time"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../api-reference",children:"API Reference \u2192"})," - Explore all endpoints"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);